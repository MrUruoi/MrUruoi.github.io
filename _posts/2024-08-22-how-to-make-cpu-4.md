---
layout: post
title: CPU 만들기 (4)
subtitle: CPU의 사양
author: gonayun
categories: etc.
tags: CPU cpuの創りかた TD4 Specification
sidebar: []
---

TD4의 사양에 대해 간략히 정리

## 레지스터의 구성

* 4bit CPU
* 4비트의 연산용 레지스터 2개
  * A 레지스터, B 레지스터
  * 리셋 직후는 0000 (이진수)
* 4비트 프로그램 카운터
  * 4비트이므로 프로그램은 최대 16스텝 
  * 리셋 직후는 0000 (이진수)
* 플래그는 C (캐리) 하나
  * 가산명령에서 캐리가 발생하면 1
  * 가산명령 이외에 명령에도 영향이 있으므로, C 플래그를 참조하는 명령은 가산명령 직후 실행되어야 한다
* I/O는 단순 패러럴포트로 입출력 모두 4비트
  * 리셋 직후는 0000 (이진수)

## 명령 포맷

* 모든 명령은 8비트로 구성
  * 상위 4비트가 오퍼레이션 코드, MSB
  * 하위 4비트가 이미디어트 데이터(Im), LSB

## 명령 일람

* 가산명령
  * **ADD A, Im**: 0000
  * **ADD B, Im**: 0101
* A 또는 B레지스터에 Im을 전송
  * **MOV A, Im**: 0011
  * **MOV B, Im**: 0111
* 레지스터 간 전송
  * **MOV A, B**: 0001
  * **MOV B, A**: 0100
* Im으로 점프
  * **JMP Im**: 1111
* 조건분기 (C플래그가 설정되어 있지 않으면 점프)
  * **JNC Im**: 1110
* 입력 포트로부터 A 또는 B레지스터에 전송
  * **IN A**: 0010
  * **IN A**: 0110
* B 레지스터의 데이터를 출력 포트로 전송
  * **OUT B**: 1001
* Im를 출력 포트로 전송
  * **OUT Im**: 1011
* 사실상 NOP 명령 (00000000)
  * **ADD A, 0**
