---
layout: post
title: CPU 만들기 (10)
subtitle: 프로그램 실행
author: gonayun
categories: etc.
tags: CPU cpuの創りかた TD4
sidebar: []
---

TD4가 완성되었으니 드디어 프로그램 작성 및 실행할 수 있습니다.
책에 나온 간단한 샘플 프로그램을 소개합니다.

## 샘플 프로그램1: LED반짝반짝 (LEDちかちか)

정해진 패턴을 포트에 출력하는 동작을 단순히 나열한 후, 그것을 무한 루프로 반복하는 단순한 프로그램입니다.

```assembly
OUT 0011    ; 0011을 출력
OUT 0110    ; 0110을 출력
OUT 1100    ; ...
OUT 1000
OUT 1000
OUT 1100
OUT 0110
OUT 0011
OUT 0001
JMP 0000    ; 0번지에 점프 (무한루프)
```

## 샘플 프로그램2: 라면 타이머 (ラーメンタイマー)

말그대로 타이머입니다. 시작하면 LED 3개가 점등되고, 1분 경과 후 LED 2개가 점등되며, 마지막 1분 동안은 LED가 점멸을 반복하고, 시간이 되면 종료를 알리는 LED가 점등됩니다.\
○●●● : 시작 ~ 1분\
○●●○ : 1분 ~ 2분\
○●○○ <-> ○○○○ : 2분 ~ 3분\
●○○○ : 3분후\

1루프가 2명령, 즉 2클록입니다(1Hz기준). 전부 195클록이므로 엄밀히 말해서 3분 15초가 됩니다.

```assembly
OUT 0111    ; LED 3개 점등
ADD A, 0001 ; A레지스터 +1
JNC 0001    ; 캐리가 발생할 때 까지 루프, 즉 16회
ADD A, 0001
JNC 0011
OUT 0110    ; LED 2개 점등
ADD A, 0001
JNC 0110
ADD A, 0001
JNC 1000
OUT 0000
OUT 0100
ADD 0001
JNC 1010
OUT 1000    ; 종료 LED 점등
JMP 1111    ; 자신에게 점프(무한루프), 즉 정지
```

## 생략한 것

어디까지나 CPU의 기본적인 구조와 원리를 이해하기 위한 목적이기에 자세한 내용은 생략했습니다.\
책에는 아래의 내용이 소개되어 있습니다.

* 최대동작주파수
